(this["webpackJsonpremote-ctrl-ui"]=this["webpackJsonpremote-ctrl-ui"]||[]).push([[0],{199:function(e,t,n){},200:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),s=n.n(i),c=(n(199),n(200),n(14)),o=n.n(c),u=n(22),l=n(30),d=n(31),h=n(35),p=n(34),v=n(186),f=n.n(v),g=n(71),j=n(84),O=n.n(j),m=n(362),b=n(363),x=n(364),k=n(140),S=n.n(k),y=n(361),w=n(359),I=n(54),C=n(50),M=n(187),A=n(76),P={servicePort:"Service Port",uiPort:"UI Port",smartthingsAppId:"Smartthings Application Id",smartthingsAppSecret:"Smartthings Application Secret",save:"Save",settings:"Settings",devices:"Devices",addDevice:"Add Device",users:"Users",addUser:"Add User",actionId:"Action",deviceLabel:"Device Label",cooling10Mins:"Cooling 10 Mins",cooling20Mins:"Cooling 20 Mins",cooling30Mins:"Cooling 30 Mins",windscreen10Mins:"Windscreen 10 Mins",windscreen20Mins:"Windscreen 20 Mins",windscreen30Mins:"Windscreen 30 Mins",heating10Mins:"Heating 10 Mins",heating20Mins:"Heating 20 Mins",heating30Mins:"Heating 30 Mins",airconOn:"Air conditioner On",airconOff:"Air conditioner Off",headlightsOn:"Headlights On",headlightsOff:"Headlights Off",parkinglightsOn:"Parkinglights On",parkinglightsOff:"Parkinglights Off",username:"Username",password:"Password",delete:"Delete",shard:"Smartthings Portal Shard",macAddress:"Outlander PHEV Client Mac Address",keycloakJson:"Securing Applications using keycloak.json"};function D(){return P}var T=n(203),N="";function J(e){console.error("error:",e.data)}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,r){T({url:e,method:t,headers:n,transformResponse:function(e){return e},withCredentials:!0,timeout:29e3}).then((function(e){a(e)})).catch((function(e){J(e),r(e)}))}))}function U(e){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(t){var n,a,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"GET",a=r.length>2?r[2]:void 0,e.next=4,L("".concat(N).concat(t),n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise((function(r,i){T({url:e,method:t,data:n,transformResponse:function(e){return e},headers:a,withCredentials:!0,timeout:29e3}).then((function(e){r(e)})).catch((function(e){J(e),i(e)}))}))}function H(e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(o.a.mark((function e(t){var n,a,r,i,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"POST",a=s.length>2?s[2]:void 0,r=s.length>3?s[3]:void 0,(i=r||{})["Content-Type"]="application/json",e.next=7,E("".concat(N).concat(t),n,JSON.stringify(a),i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n(6),K=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={settings:{},servicePort:"",uiPort:"",smartthingsAppId:"",smartthingsAppSecret:"",macAddress:"",changed:!1,loading:!1,error:"",keycloakJson:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i,s,c,u,l,d,h,p,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.uiPort,a=t.servicePort,r=t.settings,i=t.smartthingsAppId,s=t.smartthingsAppSecret,c=t.macAddress,u=t.keycloakJson,l=t.shard,this.setState({loading:!0}),d=JSON.parse(JSON.stringify(r.data)),i&&(d.smartthings.appId=i),s&&(d.smartthings.appSecret=s),l&&(d.smartthings.shard=l),c&&(d.macAddress=c),a&&(d.port=a),n&&(d.portUI=n),e.prev=9,e.next=12,U("/ui/smartthings/check?appId=".concat(i,"&secret=").concat(s));case 12:if(h=e.sent,"OK"!==(p=JSON.parse(h.data)).status){e.next=37;break}return e.next=17,H("/ui/settings","POST",d);case 17:if(h=e.sent,"OK"!==(p=JSON.parse(h.data)).status){e.next=34;break}if(v={changed:!1},!u){e.next=27;break}return e.next=24,H("/ui/settings/saveKeycloak","POST",{keycloakJson:u});case 24:h=e.sent,"OK"!==(p=JSON.parse(h.data)).status?v.error=p.message:v.error="";case 27:return e.next=29,this.props.reload();case 29:return e.next=31,this.reload();case 31:this.setState(v),e.next=35;break;case 34:this.setState({error:p.message});case 35:e.next=38;break;case 37:this.setState({error:p.message});case 38:return e.prev=38,this.setState({loading:!1}),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[9,,38,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(_.jsx)("a",{children:D()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"macAddress"===n.name?Object(_.jsx)(M.a,{mask:"##:##:##:##:##:##",name:D().macAddress||t,value:a,placeholder:"xx:xx:xx:xx:xx:xx",onChange:function(t){if(t.target.value&&!t.target.value.includes("_")){var n={changed:!0};n.macAddress=t.target.value,e.setState(n)}}}):"keycloakJson"===n.name?Object(_.jsx)(A.a,{onChange:function(t){if(t.target.value){var n={changed:!0};n.keycloakJson=t.target.value,e.setState(n)}},placeholder:"Keycloak Json",autoSize:{minRows:3,maxRows:5}}):"shard"===n.name?a:Object(_.jsx)(C.a,{editable:{onChange:function(t){if(t){var a={changed:!0};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"reload",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/ui/settings");case 2:t=e.sent,n=t.data,a=JSON.parse(n),this.setState({settings:a,servicePort:a.data.port,uiPort:a.data.portUI,smartthingsAppId:a.data.smartthings.appId,smartthingsAppSecret:a.data.smartthings.appSecret,macAddress:a.data.macAddress,shard:a.data.smartthings.shard,authenticationType:a.data.connectionType});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.settings,a=t.changed,r=t.loading,i=t.error;if("OK"===n.status){var s=[{name:"macAddress",value:n.data.macAddress},{name:"shard",value:n.data.smartthings.shard},{name:"smartthingsAppId",value:n.data.smartthings.appId},{name:"smartthingsAppSecret",value:n.data.smartthings.appSecret},{name:"keycloakJson",value:""}];return Object(_.jsxs)("div",{children:[i?Object(_.jsx)(y.a,{message:i,showIcon:!0,type:"error",closable:!0}):null,Object(_.jsx)(w.a,{columns:this.getColumns(),dataSource:s}),Object(_.jsx)(I.a,{type:"primary",loading:r,block:!0,disabled:!a,onClick:function(){e.onSaveClick()},children:D().save||"Save"})]})}return null}}]),n}(a.Component),G=n(93),F=n(360),W="SMARTTHINGS_SETTINGS",B="SMARTTHINGS_ADD_DEVICE",z="SMARTTHINGS_VIEW_DEVICE",Z="ADD_USER",q="VIEW_USER",Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,canSave:!1,deviceLabel:"",actionId:""},e}return Object(d.a)(n,[{key:"onSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.deviceLabel,a=t.actionId,this.setState({loading:!0}),e.prev=2,r=Object(F.a)(),e.next=6,H("/ui/settings/addDevice","POST",{id:r,deviceLabel:n,actionId:a});case 6:return e.next=8,this.props.reload(z,r);case 8:return e.prev=8,this.setState({loading:!1}),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[2,,8,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(_.jsx)("a",{children:D()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"actionId"===n.name?Object(_.jsxs)(G.a,{style:{width:200},onChange:function(t){e.onActionChange(t)},children:[Object(_.jsx)(G.a.Option,{value:"airconOn",children:D().airconOn}),Object(_.jsx)(G.a.Option,{value:"airconOff",children:D().airconOff}),Object(_.jsx)(G.a.Option,{value:"headlightsOn",children:D().headlightsOn}),Object(_.jsx)(G.a.Option,{value:"headlightsOff",children:D().headlightsOff}),Object(_.jsx)(G.a.Option,{value:"parkinglightsOn",children:D().parkinglightsOn}),Object(_.jsx)(G.a.Option,{value:"parkinglightsOff",children:D().parkinglightsOff}),Object(_.jsx)(G.a.Option,{value:"cooling10Mins",children:D().cooling10Mins}),Object(_.jsx)(G.a.Option,{value:"cooling20Mins",children:D().cooling20Mins}),Object(_.jsx)(G.a.Option,{value:"cooling30Mins",children:D().cooling30Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen10Mins",children:D().windscreen10Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen20Mins",children:D().windscreen20Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen30Mins",children:D().windscreen30Mins}),Object(_.jsx)(G.a.Option,{value:"heating10Mins",children:D().heating10Mins}),Object(_.jsx)(G.a.Option,{value:"heating20Mins",children:D().heating20Mins}),Object(_.jsx)(G.a.Option,{value:"heating30Mins",children:D().heating30Mins})]}):Object(_.jsx)(C.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.canSave,r=t.actionId,i=[{name:"deviceLabel",value:t.deviceLabel},{name:"actionId",value:r}];return Object(_.jsxs)("div",{children:[Object(_.jsx)(w.a,{columns:this.getColumns(),dataSource:i}),Object(_.jsx)(I.a,{type:"primary",loading:n,block:!0,disabled:!a,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:D().save||"Save"})]})}}]),n}(a.Component),X=n(184),Y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loadingPage:!1,loading:!1,canSave:!1,deviceLabel:"",actionId:"",deviceId:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.deviceId===t.deviceId){e.next=3;break}return e.next=3,this.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.deviceId,this.setState({loading:!0}),e.prev=2,e.next=5,H("/ui/settings/deleteDevice","POST",{deviceId:t});case 5:return e.next=7,this.props.reload(W);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.deviceLabel,a=t.actionId,r=t.deviceId,this.setState({loading:!0}),e.prev=2,e.next=5,H("/ui/settings/addDevice","POST",{id:r,deviceLabel:n,actionId:a});case 5:return e.next=7,this.props.reload(z,r);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(_.jsx)("a",{children:D()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"actionId"===n.name?Object(_.jsxs)(G.a,{defaultValue:e.state.actionId,style:{width:200},onChange:function(t){e.onActionChange(t)},children:[Object(_.jsx)(G.a.Option,{value:"airconOn",children:D().airconOn}),Object(_.jsx)(G.a.Option,{value:"airconOff",children:D().airconOff}),Object(_.jsx)(G.a.Option,{value:"headlightsOn",children:D().headlightsOn}),Object(_.jsx)(G.a.Option,{value:"headlightsOff",children:D().headlightsOff}),Object(_.jsx)(G.a.Option,{value:"parkinglightsOn",children:D().parkinglightsOn}),Object(_.jsx)(G.a.Option,{value:"parkinglightsOff",children:D().parkinglightsOff}),Object(_.jsx)(G.a.Option,{value:"cooling10Mins",children:D().cooling10Mins}),Object(_.jsx)(G.a.Option,{value:"cooling20Mins",children:D().cooling20Mins}),Object(_.jsx)(G.a.Option,{value:"cooling30Mins",children:D().cooling30Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen10Mins",children:D().windscreen10Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen20Mins",children:D().windscreen20Mins}),Object(_.jsx)(G.a.Option,{value:"windscreen30Mins",children:D().windscreen30Mins}),Object(_.jsx)(G.a.Option,{value:"heating10Mins",children:D().heating10Mins}),Object(_.jsx)(G.a.Option,{value:"heating20Mins",children:D().heating20Mins}),Object(_.jsx)(G.a.Option,{value:"heating30Mins",children:D().heating30Mins})]}):"deviceId"===n.name?a:Object(_.jsx)(C.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"reload",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingPage:!0}),e.next=3,U("/ui/settings");case 3:t=e.sent,n=t.data,a=JSON.parse(n),r=a.data.smartthings.devices.find((function(e){return e.id===i.props.deviceId})),this.setState({actionId:r.actionId,deviceLabel:r.deviceLabel,deviceId:r.id,loadingPage:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.loadingPage,r=t.canSave,i=t.actionId,s=[{name:"deviceId",value:t.deviceId},{name:"deviceLabel",value:t.deviceLabel},{name:"actionId",value:i}];return a?Object(_.jsx)(X.a,{}):Object(_.jsxs)("div",{children:[Object(_.jsx)(w.a,{columns:this.getColumns(),dataSource:s}),Object(_.jsx)(I.a,{type:"primary",loading:n,block:!0,disabled:!r,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:D().save||"Save"}),Object(_.jsx)(I.a,{type:"primary",loading:n,block:!0,danger:!0,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDeleteClick();case 2:case"end":return t.stop()}}),t)}))),children:D().delete||"Delete"})]})}}]),n}(a.Component),$=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,canSave:!1,username:"",password:""},e}return Object(d.a)(n,[{key:"onSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,this.setState({loading:!0}),e.prev=2,r={users:[]},i=Object(F.a)(),r.users.push({id:i,username:n,password:a}),e.next=8,H("/ui/settings","POST",r);case 8:return e.next=10,this.props.reload(CONTENTS.ViewUser,i);case 10:return e.prev=10,this.setState({loading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,,10,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(_.jsx)("a",{children:D()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return Object(_.jsx)(C.a,{editable:{onChange:function(t){if(t){var a={};a[n.name]=t;var r={canSave:e.validation(a)};r[n.name]=t,e.setState(r)}}},children:a})}}]}},{key:"validation",value:function(e){return(e.username||this.state.username)&&(e.password||this.state.password)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.canSave,r=[{name:"username",value:t.username},{name:"password",value:t.password}];return Object(_.jsxs)("div",{children:[Object(_.jsx)(w.a,{columns:this.getColumns(),dataSource:r}),Object(_.jsx)(I.a,{type:"primary",loading:n,block:!0,disabled:!a,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:D().save||"Save"})]})}}]),n}(a.Component),ee=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loadingPage:!1,loading:!1,canSave:!1,username:"",password:"",userId:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.userId===t.userId){e.next=3;break}return e.next=3,this.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,r=t.userId,this.setState({loading:!0}),e.prev=2,s=r,(i={users:[]}).users.push({id:s,username:n,password:a}),e.next=8,H("/ui/settings","POST",i);case 8:return e.next=10,this.props.reload(q,s);case 10:return e.prev=10,this.setState({loading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,,10,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onDeleteClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.userId,this.setState({loading:!0}),e.prev=2,e.next=5,H("/ui/settings/deleteUser","POST",{userId:t});case 5:return e.next=7,this.props.reload(W);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(_.jsx)("a",{children:D()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"userId"===n.name?a:Object(_.jsx)(C.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:"password"===n.name&&a?"*******":a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"reload",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingPage:!0}),e.next=3,U("/ui/settings");case 3:t=e.sent,n=t.data,a=JSON.parse(n),r=a.data.users.find((function(e){return e.id===i.props.userId})),this.setState({username:r.username,password:r.password,userId:r.id,loadingPage:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingPage,a=t.loading,r=t.canSave,i=t.username,s=[{name:"userId",value:t.userId},{name:"username",value:i},{name:"password",value:t.password}];return n?Object(_.jsx)("spin",{}):Object(_.jsxs)("div",{children:[Object(_.jsx)(w.a,{columns:this.getColumns(),dataSource:s}),Object(_.jsx)(I.a,{type:"primary",loading:a,block:!0,disabled:!r,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:D().save||"Save"}),Object(_.jsx)(I.a,{type:"primary",loading:a,block:!0,danger:!0,onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDeleteClick();case 2:case"end":return t.stop()}}),t)}))),children:D().delete||"Delete"})]})}}]),n}(a.Component),te=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.name,t=this.props.reload,n=this.props.id;return e===W?Object(_.jsx)(K,{reload:t}):e===B?Object(_.jsx)(Q,{reload:t}):e===z?Object(_.jsx)(Y,{reload:t,deviceId:n}):e===Z?Object(_.jsx)($,{reload:t}):e===q?Object(_.jsx)(ee,{reload:t,userId:n}):null}}]),n}(a.Component),ne=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!1,selectorPage:null,settings:null,componentId:null},e.reload=function(){var t=Object(u.a)(o.a.mark((function t(n,a){var r,i,s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U("/ui/settings");case 2:if(r=t.sent,i=r.data,!(s=JSON.parse(i)).data.smartthings.appId||!s.data.smartthings.appSecret){t.next=8;break}return t.next=8,U("/ui/settings/syncDevices");case 8:return t.next=10,U("/ui/settings");case 10:c=t.sent,s=JSON.parse(c.data),u={settings:s},n&&(u.selectorPage=n),a&&(u.componentId=a),e.setState(u);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e.onSmartThingsSettingClick=function(){e.setState({selectorPage:W})},e.onSmartThingsAddDeviceClick=function(){e.setState({selectorPage:B})},e.onAddUsersClick=function(){e.setState({selectorPage:Z})},e.onSmartThingsViewDeviceClick=function(t){e.setState({selectorPage:z,componentId:t})},e.onViewUserClick=function(t){e.setState({selectorPage:q,componentId:t})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.collapsed,a=t.selectorPage,r=t.componentId,i=t.settings;return Object(_.jsxs)(O.a,{style:{minHeight:"100vh"},children:[Object(_.jsxs)(f.a,{collapsible:!0,collapsed:n,onCollapse:this.onCollapse,children:[Object(_.jsx)("div",{className:"logo"}),Object(_.jsxs)(g.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(_.jsx)(g.a.Item,{icon:Object(_.jsx)(m.a,{}),onClick:this.onSmartThingsSettingClick,children:D().settings},"1"),Object(_.jsxs)(S.a,{icon:Object(_.jsx)(b.a,{}),title:D().devices,disabled:!(i&&i.data.smartthings.appId&&i.data.smartthings.appSecret),children:[i&&i.data.smartthings.devices?i.data.smartthings.devices.map((function(t){return Object(_.jsx)(g.a.Item,{onClick:function(){e.onSmartThingsViewDeviceClick(t.id)},children:t.deviceLabel},t.id)})):null,Object(_.jsx)(g.a.Item,{onClick:this.onSmartThingsAddDeviceClick,children:D().addDevice},"addDevice")]},"devices"),i&&"local"===i.data.connectionType?Object(_.jsxs)(S.a,{icon:Object(_.jsx)(x.a,{}),title:D().users,children:[i&&i.data.users?i.data.users.map((function(t){return Object(_.jsx)(g.a.Item,{onClick:function(){e.onViewUserClick(t.id)},children:t.username},t.id)})):null,Object(_.jsx)(g.a.Item,{onClick:function(){e.onAddUsersClick()},children:D().addUser},"addUser")]},"sub1"):null]})]}),Object(_.jsxs)(O.a,{className:"site-layout",children:[Object(_.jsx)(j.Header,{className:"site-layout-background",style:{padding:0}}),Object(_.jsx)(te,{name:a||W,id:r,reload:this.reload}),Object(_.jsx)(j.Footer,{style:{textAlign:"center"},children:" \xa92021 Created by Vasyl Zakharchenko"})]})]})}}]),n}(a.Component);var ae=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(ne,{})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,365)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(ae,{})}),document.getElementById("root")),re()}},[[356,1,2]]]);
//# sourceMappingURL=main.2578f553.chunk.js.map