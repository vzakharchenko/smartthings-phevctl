(this["webpackJsonpremote-ctrl-ui"]=this["webpackJsonpremote-ctrl-ui"]||[]).push([[0],{213:function(e,t,n){},214:function(e,t,n){},369:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(27),s=n.n(r),c=(n(213),n(214),n(14)),o=n.n(c),l=n(23),u=n(30),d=n(31),h=n(38),p=n(37),v=n(198),g=n.n(v),f=n(79),j=n(94),m=n.n(j),O=n(377),b=n(378),x=n(379),k=n(151),S=n.n(k),y=n(42),w=n(372),I=n(105),C=n(374),M=n(371),A=n(54),P=n(201),T=n(84),D=n(375),L=n(202),N=n(32),V=n(132),J=n.n(V),U={servicePort:"Service Port",uiPort:"UI Port",smartthingsAppId:"Smartthings Application Id",smartthingsAppSecret:"Smartthings Application Secret",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",devices:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",addDevice:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e",users:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",addUser:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actionId:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",deviceLabel:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",cooling10Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0445\u043b\u0430\u0436\u0434\u0435\u043d\u0438\u044f \u043d\u0430 10 \u041c\u0438\u043d.",cooling20Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0445\u043b\u0430\u0436\u0434\u0435\u043d\u0438\u044f \u043d\u0430 20 \u041c\u0438\u043d.",cooling30Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0445\u043b\u0430\u0436\u0434\u0435\u043d\u0438\u044f \u043d\u0430 30 \u041c\u0438\u043d.",windscreen10Mins:"\u041e\u0431\u043e\u0433\u0440\u0435\u0432 \u043b\u043e\u0431\u043e\u0432\u043e\u0433\u043e \u043e\u043a\u043d\u0430 \u043d\u0430 10 \u043c\u0438\u043d.",windscreen20Mins:"\u041e\u0431\u043e\u0433\u0440\u0435\u0432 \u043b\u043e\u0431\u043e\u0432\u043e\u0433\u043e \u043e\u043a\u043d\u0430 \u043d\u0430 20 \u043c\u0438\u043d.",windscreen30Mins:"\u041e\u0431\u043e\u0433\u0440\u0435\u0432 \u043b\u043e\u0431\u043e\u0432\u043e\u0433\u043e \u043e\u043a\u043d\u0430 \u043d\u0430 30 \u043c\u0438\u043d.",heating10Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044f \u043d\u0430 10 \u043c\u0438\u043d.",heating20Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044f \u043d\u0430 20 \u043c\u0438\u043d.",heating30Mins:"\u0420\u0435\u0436\u0438\u043c \u041e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044f \u043d\u0430 30 \u043c\u0438\u043d.",airconOn:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u041a\u043b\u0438\u043c\u0430\u0442 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c",airconOff:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u041a\u043b\u0438\u043c\u0430\u0442 \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c",headlightsOn:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0424\u0430\u0440\u044b",headlightsOff:"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0424\u0430\u0440\u044b",parkinglightsOn:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u041f\u0430\u0440\u043a\u043e\u0432\u043e\u0447\u043d\u044b\u0435 \u043e\u0433\u043d\u0438",parkinglightsOff:"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u041f\u0430\u0440\u043a\u043e\u0432\u043e\u0447\u043d\u044b\u0435 \u043e\u0433\u043d\u0438",username:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",password:"\u041f\u0430\u0440\u043e\u043b\u044c",delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",shard:"Smartthings Portal Shard",macAddress:"MAC \u0430\u0434\u0440\u0435\u0441",keycloakJson:"Securing Applications using keycloak.json",testDevice:"\u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e",actionTimeout:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f ",language:"\u042f\u0437\u044b\u043a",modalHelp:"\u0413\u0434\u0435 \u0432\u0437\u044f\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 ",modalStep1:"1. \u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043f\u043e\u0440\u0442\u0430\u043b ",modalStep2:"2. \u0412\u044b\u0431\u0440\u0430\u0442\u044c smartapps \u0432 \u0432\u0430\u0448\u0435\u0439 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 ",modalStep3:'3. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0435 \u0432\u0430\u043c\u0438 "remote-ctrl-gsm" ',modalStep4:"4. \u0412\u043e\u0437\u043c\u0438\u0442\u0435 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 "},E={servicePort:"Service Port",uiPort:"UI Port",smartthingsAppId:"Smartthings Application Id",smartthingsAppSecret:"Smartthings Application Secret",save:"Save",settings:"Settings",devices:"Devices",addDevice:"Add Device",users:"Users",addUser:"Add User",actionId:"Action",deviceLabel:"Device Label",cooling10Mins:"Cooling Mode 10 Mins",cooling20Mins:"Cooling Mode 20 Mins",cooling30Mins:"Cooling Mode 30 Mins",windscreen10Mins:"Windscreen Mode 10 Mins",windscreen20Mins:"Windscreen Mode 20 Mins",windscreen30Mins:"Windscreen Mode 30 Mins",heating10Mins:"Heating Mode 10 Mins",heating20Mins:"Heating Mode 20 Mins",heating30Mins:"Heating Mode 30 Mins",airconOn:"Air conditioner On",airconOff:"Air conditioner Off",headlightsOn:"Headlights On",headlightsOff:"Headlights Off",parkinglightsOn:"Parkinglights On",parkinglightsOff:"Parkinglights Off",username:"Username",password:"Password",delete:"Delete",shard:"Smartthings Portal Shard",macAddress:"Outlander PHEV Client Mac Address",keycloakJson:"Securing Applications using keycloak.json",testDevice:"Test Action",actionTimeout:"Action Timeout",language:"Language",modalHelp:"Where to get ",modalStep1:"1. Open ",modalStep2:"2. Select smartapps in your location ",modalStep3:"3. Select your smartapp ",modalStep4:"4. get parameter "};function H(){return"Russian"===J.a.get("Language")?Object(N.a)(Object(N.a)({},E),U):E}var R=n(216),_="";function K(e){console.error("error:",e.data)}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,i){R({url:e,method:t,headers:n,transformResponse:function(e){return e},withCredentials:!0,timeout:29e3}).then((function(e){a(e)})).catch((function(e){K(e),i(e)}))}))}function W(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(t){var n,a,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",a=i.length>2?i[2]:void 0,e.next=4,G("".concat(_).concat(t),n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise((function(i,r){R({url:e,method:t,data:n,transformResponse:function(e){return e},headers:a,withCredentials:!0,timeout:29e3}).then((function(e){i(e)})).catch((function(e){K(e),r(e)}))}))}function z(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(o.a.mark((function e(t){var n,a,i,r,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"POST",a=s.length>2?s[2]:void 0,i=s.length>3?s[3]:void 0,(r=i||{})["Content-Type"]="application/json",e.next=7,B("".concat(_).concat(t),n,JSON.stringify(a),r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=n(6),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={settings:{},servicePort:"",uiPort:"",smartthingsAppId:"",smartthingsAppSecret:"",macAddress:"",actionTimeout:0,language:"English",changed:!1,loading:!1,error:"",keycloakJson:"",isModalVisible:!1},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r,s,c,l,u,d,h,p,v,g,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.uiPort,a=t.servicePort,i=t.settings,r=t.smartthingsAppId,s=t.smartthingsAppSecret,c=t.macAddress,l=t.keycloakJson,u=t.language,d=t.actionTimeout,h=t.shard,this.setState({loading:!0}),p=JSON.parse(JSON.stringify(i.data)),r&&(p.smartthings.appId=r),s&&(p.smartthings.appSecret=s),h&&(p.smartthings.shard=h),c&&(p.macAddress=c),a&&(p.port=a),n&&(p.portUI=n),d&&(p.smartthings.timeout=d),u&&(p.language=u),e.prev=11,e.next=14,W("/ui/smartthings/check?appId=".concat(r,"&secret=").concat(s));case 14:if(v=e.sent,"OK"!==(g=JSON.parse(v.data)).status){e.next=39;break}return e.next=19,z("/ui/settings","POST",p);case 19:if(v=e.sent,"OK"!==(g=JSON.parse(v.data)).status){e.next=36;break}if(f={changed:!1},!l){e.next=29;break}return e.next=26,z("/ui/settings/saveKeycloak","POST",{keycloakJson:l});case 26:v=e.sent,"OK"!==(g=JSON.parse(v.data)).status?f.error=g.message:f.error="";case 29:return e.next=31,this.props.reload();case 31:return e.next=33,this.reload();case 33:this.setState(f),e.next=37;break;case 36:this.setState({error:g.message});case 37:e.next=40;break;case 39:this.setState({error:g.message});case 40:return e.prev=40,this.setState({loading:!1}),e.finish(40);case 43:case"end":return e.stop()}}),e,this,[[11,,40,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(t){return"smartthingsAppId"===t||"smartthingsAppSecret"===t?Object(q.jsxs)("div",{children:[Object(q.jsx)("a",{children:H()[t]||t}),Object(q.jsx)(y.a,{type:"text",icon:Object(q.jsx)(D.a,{}),onClick:function(){e.setState({isModalVisible:!0})}}),Object(q.jsxs)(L.a,{title:H().modalHelp+H()[t]||t,visible:e.state.isModalVisible,onCancel:function(){e.setState({isModalVisible:!1})},footer:[Object(q.jsx)(y.a,{type:"primary",onClick:function(){e.setState({isModalVisible:!1})},children:"Ok"},"ok")],children:[Object(q.jsxs)("p",{children:[H().modalStep1,Object(q.jsx)(y.a,{type:"link",onClick:function(){window.open("https://graph.api.smartthings.com","_blank")},children:"https://graph.api.smartthings.com/"})]}),Object(q.jsx)("p",{children:H().modalStep2}),Object(q.jsx)(w.a,{width:400,src:"/img/smartapp1.png"}),Object(q.jsx)("p",{children:H().modalStep3}),Object(q.jsx)(w.a,{width:400,src:"/img/smartapp2.png"}),Object(q.jsx)("p",{children:H().modalStep4+H()[t]||t}),Object(q.jsx)(w.a,{width:400,src:"/img/smartapp3.png"})]})]}):Object(q.jsx)("a",{children:H()[t]||t})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"macAddress"===n.name?Object(q.jsx)(P.a,{mask:"##:##:##:##:##:##",name:H().macAddress||t,value:a,placeholder:"xx:xx:xx:xx:xx:xx",onChange:function(t){if(t.target.value&&!t.target.value.includes("_")){var n={changed:!0};n.macAddress=t.target.value,e.setState(n)}}}):"keycloakJson"===n.name?Object(q.jsx)(T.a,{onChange:function(t){if(t.target.value){var n={changed:!0};n.keycloakJson=t.target.value,e.setState(n)}},placeholder:"Keycloak Json",autoSize:{minRows:3,maxRows:5}}):"shard"===n.name?a:"language"===n.name?Object(q.jsxs)(I.a,{defaultValue:e.state.language,style:{width:200},onChange:function(t){e.setState({language:t,changed:!0})},children:[Object(q.jsx)(I.a.Option,{value:"English",children:"English"}),Object(q.jsx)(I.a.Option,{value:"Russian",children:"Russian"})]}):Object(q.jsx)(A.a,{editable:{onChange:function(t){if(t){var a={changed:!0};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"reload",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("/ui/settings");case 2:t=e.sent,n=t.data,a=JSON.parse(n),i=a.data.language||"English",J.a.get("Language")!==i&&("Russian"!==i&&"English"!==i||J.a.set("Language",i)),this.setState({settings:a,servicePort:a.data.port,uiPort:a.data.portUI,smartthingsAppId:a.data.smartthings.appId,smartthingsAppSecret:a.data.smartthings.appSecret,macAddress:a.data.macAddress,shard:a.data.smartthings.shard,authenticationType:a.data.connectionType,actionTimeout:a.data.smartthings.timeout,language:a.data.language||"English"});case 7:case"end":return e.stop()}var i}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.settings,a=t.changed,i=t.loading,r=t.error;if("OK"===n.status){var s=[{name:"macAddress",value:n.data.macAddress},{name:"shard",value:n.data.smartthings.shard},{name:"smartthingsAppId",value:n.data.smartthings.appId},{name:"smartthingsAppSecret",value:n.data.smartthings.appSecret},{name:"keycloakJson",value:""},{name:"actionTimeout",value:n.data.smartthings.timeout},{name:"language",value:n.data.language}];return Object(q.jsxs)("div",{children:[r?Object(q.jsx)(C.a,{message:r,showIcon:!0,type:"error",closable:!0}):null,Object(q.jsx)(M.a,{columns:this.getColumns(),dataSource:s}),Object(q.jsx)(y.a,{type:"primary",loading:i,block:!0,disabled:!a,onClick:function(){e.onSaveClick()},children:H().save||"Save"})]})}return null}}]),n}(a.Component),X=n(373),Y="SMARTTHINGS_SETTINGS",$="SMARTTHINGS_ADD_DEVICE",ee="SMARTTHINGS_VIEW_DEVICE",te="ADD_USER",ne="VIEW_USER",ae=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,canSave:!1,deviceLabel:"",actionId:""},e}return Object(d.a)(n,[{key:"onSaveClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.deviceLabel,a=t.actionId,this.setState({loading:!0}),e.prev=2,i=Object(X.a)(),e.next=6,z("/ui/settings/addDevice","POST",{id:i,deviceLabel:n,actionId:a});case 6:return e.next=8,this.props.reload(ee,i);case 8:return e.prev=8,this.setState({loading:!1}),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[2,,8,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(q.jsx)("a",{children:H()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"actionId"===n.name?Object(q.jsxs)(I.a,{style:{width:200},onChange:function(t){e.onActionChange(t)},children:[Object(q.jsx)(I.a.Option,{value:"airconOn",children:H().airconOn}),Object(q.jsx)(I.a.Option,{value:"airconOff",children:H().airconOff}),Object(q.jsx)(I.a.Option,{value:"headlightsOn",children:H().headlightsOn}),Object(q.jsx)(I.a.Option,{value:"headlightsOff",children:H().headlightsOff}),Object(q.jsx)(I.a.Option,{value:"parkinglightsOn",children:H().parkinglightsOn}),Object(q.jsx)(I.a.Option,{value:"parkinglightsOff",children:H().parkinglightsOff}),Object(q.jsx)(I.a.Option,{value:"cooling10Mins",children:H().cooling10Mins}),Object(q.jsx)(I.a.Option,{value:"cooling20Mins",children:H().cooling20Mins}),Object(q.jsx)(I.a.Option,{value:"cooling30Mins",children:H().cooling30Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen10Mins",children:H().windscreen10Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen20Mins",children:H().windscreen20Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen30Mins",children:H().windscreen30Mins}),Object(q.jsx)(I.a.Option,{value:"heating10Mins",children:H().heating10Mins}),Object(q.jsx)(I.a.Option,{value:"heating20Mins",children:H().heating20Mins}),Object(q.jsx)(I.a.Option,{value:"heating30Mins",children:H().heating30Mins})]}):Object(q.jsx)(A.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.canSave,i=t.actionId,r=[{name:"deviceLabel",value:t.deviceLabel},{name:"actionId",value:i}];return Object(q.jsxs)("div",{children:[Object(q.jsx)(M.a,{columns:this.getColumns(),dataSource:r}),Object(q.jsx)(y.a,{type:"primary",loading:n,block:!0,disabled:!a,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:H().save||"Save"})]})}}]),n}(a.Component),ie=n(196),re=n(376),se=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loadingPage:!1,loading:!1,canSave:!1,deviceLabel:"",actionId:"",deviceId:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.deviceId===t.deviceId){e.next=3;break}return e.next=3,this.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.deviceId,this.setState({loading:!0}),e.prev=2,e.next=5,z("/ui/settings/deleteDevice","POST",{deviceId:t});case 5:return e.next=7,this.props.reload(Y);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.deviceLabel,a=t.actionId,i=t.deviceId,this.setState({loading:!0}),e.prev=2,e.next=5,z("/ui/settings/addDevice","POST",{id:i,deviceLabel:n,actionId:a});case 5:return e.next=7,this.props.reload(ee,i);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onTestClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.deviceId,this.setState({loading:!0}),e.prev=2,e.next=5,z("/ui/settings/testDevice","POST",{id:t});case 5:return e.prev=5,this.setState({loading:!1}),e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[2,,5,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(q.jsx)("a",{children:H()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"actionId"===n.name?Object(q.jsxs)(I.a,{defaultValue:e.state.actionId,style:{width:200},onChange:function(t){e.onActionChange(t)},children:[Object(q.jsx)(I.a.Option,{value:"airconOn",children:H().airconOn}),Object(q.jsx)(I.a.Option,{value:"airconOff",children:H().airconOff}),Object(q.jsx)(I.a.Option,{value:"headlightsOn",children:H().headlightsOn}),Object(q.jsx)(I.a.Option,{value:"headlightsOff",children:H().headlightsOff}),Object(q.jsx)(I.a.Option,{value:"parkinglightsOn",children:H().parkinglightsOn}),Object(q.jsx)(I.a.Option,{value:"parkinglightsOff",children:H().parkinglightsOff}),Object(q.jsx)(I.a.Option,{value:"cooling10Mins",children:H().cooling10Mins}),Object(q.jsx)(I.a.Option,{value:"cooling20Mins",children:H().cooling20Mins}),Object(q.jsx)(I.a.Option,{value:"cooling30Mins",children:H().cooling30Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen10Mins",children:H().windscreen10Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen20Mins",children:H().windscreen20Mins}),Object(q.jsx)(I.a.Option,{value:"windscreen30Mins",children:H().windscreen30Mins}),Object(q.jsx)(I.a.Option,{value:"heating10Mins",children:H().heating10Mins}),Object(q.jsx)(I.a.Option,{value:"heating20Mins",children:H().heating20Mins}),Object(q.jsx)(I.a.Option,{value:"heating30Mins",children:H().heating30Mins})]}):"deviceId"===n.name||"deviceLabel"===n.name?a:"testDevice"===n.name?Object(q.jsx)(y.a,{type:"primary",icon:Object(q.jsx)(re.a,{}),loading:e.state.loading,onClick:function(){return e.onTestClick()}}):Object(q.jsx)(A.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"reload",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingPage:!0}),e.next=3,W("/ui/settings");case 3:t=e.sent,n=t.data,a=JSON.parse(n),i=a.data.smartthings.devices.find((function(e){return e.id===r.props.deviceId})),this.setState({actionId:i.actionId,deviceLabel:i.deviceLabel,deviceId:i.id,loadingPage:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.loadingPage,i=t.canSave,r=t.actionId,s=[{name:"deviceId",value:t.deviceId},{name:"deviceLabel",value:t.deviceLabel},{name:"actionId",value:r},{name:"testDevice",value:""}];return a?Object(q.jsx)(ie.a,{}):Object(q.jsxs)("div",{children:[Object(q.jsx)(M.a,{columns:this.getColumns(),dataSource:s}),Object(q.jsx)(y.a,{type:"primary",loading:n,block:!0,disabled:!i,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:H().save||"Save"}),Object(q.jsx)(y.a,{type:"primary",loading:n,block:!0,danger:!0,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDeleteClick();case 2:case"end":return t.stop()}}),t)}))),children:H().delete||"Delete"})]})}}]),n}(a.Component),ce=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,canSave:!1,username:"",password:""},e}return Object(d.a)(n,[{key:"onSaveClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,this.setState({loading:!0}),e.prev=2,i={users:[]},r=Object(X.a)(),i.users.push({id:r,username:n,password:a}),e.next=8,z("/ui/settings","POST",i);case 8:return e.next=10,this.props.reload(CONTENTS.ViewUser,r);case 10:return e.prev=10,this.setState({loading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,,10,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(q.jsx)("a",{children:H()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return Object(q.jsx)(A.a,{editable:{onChange:function(t){if(t){var a={};a[n.name]=t;var i={canSave:e.validation(a)};i[n.name]=t,e.setState(i)}}},children:a})}}]}},{key:"validation",value:function(e){return(e.username||this.state.username)&&(e.password||this.state.password)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.canSave,i=[{name:"username",value:t.username},{name:"password",value:t.password}];return Object(q.jsxs)("div",{children:[Object(q.jsx)(M.a,{columns:this.getColumns(),dataSource:i}),Object(q.jsx)(y.a,{type:"primary",loading:n,block:!0,disabled:!a,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:H().save||"Save"})]})}}]),n}(a.Component),oe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loadingPage:!1,loading:!1,canSave:!1,username:"",password:"",userId:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.userId===t.userId){e.next=3;break}return e.next=3,this.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSaveClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,i=t.userId,this.setState({loading:!0}),e.prev=2,s=i,(r={users:[]}).users.push({id:s,username:n,password:a}),e.next=8,z("/ui/settings","POST",r);case 8:return e.next=10,this.props.reload(ne,s);case 10:return e.prev=10,this.setState({loading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,,10,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onDeleteClick",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.userId,this.setState({loading:!0}),e.prev=2,e.next=5,z("/ui/settings/deleteUser","POST",{userId:t});case 5:return e.next=7,this.props.reload(Y);case 7:return e.prev=7,this.setState({loading:!1}),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onActionChange",value:function(e){this.setState({actionId:e,canSave:this.validation(null,e)})}},{key:"getColumns",value:function(){var e=this;return[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(q.jsx)("a",{children:H()[e]||e})}},{title:"Value",dataIndex:"value",key:"value",render:function(t,n){var a=e.state[n.name];return"userId"===n.name?a:Object(q.jsx)(A.a,{editable:{onChange:function(t){if(t){var a={canSave:e.validation(t)};a[n.name]=t,e.setState(a)}}},children:"password"===n.name&&a?"*******":a})}}]}},{key:"validation",value:function(e,t){return e||this.state.deviceLabel&&t||this.state.actionId}},{key:"reload",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,i,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingPage:!0}),e.next=3,W("/ui/settings");case 3:t=e.sent,n=t.data,a=JSON.parse(n),i=a.data.users.find((function(e){return e.id===r.props.userId})),this.setState({username:i.username,password:i.password,userId:i.id,loadingPage:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingPage,a=t.loading,i=t.canSave,r=t.username,s=[{name:"userId",value:t.userId},{name:"username",value:r},{name:"password",value:t.password}];return n?Object(q.jsx)("spin",{}):Object(q.jsxs)("div",{children:[Object(q.jsx)(M.a,{columns:this.getColumns(),dataSource:s}),Object(q.jsx)(y.a,{type:"primary",loading:a,block:!0,disabled:!i,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveClick();case 2:case"end":return t.stop()}}),t)}))),children:H().save||"Save"}),Object(q.jsx)(y.a,{type:"primary",loading:a,block:!0,danger:!0,onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDeleteClick();case 2:case"end":return t.stop()}}),t)}))),children:H().delete||"Delete"})]})}}]),n}(a.Component),le=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.name,t=this.props.reload,n=this.props.id;return e===Y?Object(q.jsx)(Q,{reload:t}):e===$?Object(q.jsx)(ae,{reload:t}):e===ee?Object(q.jsx)(se,{reload:t,deviceId:n}):e===te?Object(q.jsx)(ce,{reload:t}):e===ne?Object(q.jsx)(oe,{reload:t,userId:n}):null}}]),n}(a.Component),ue=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!1,selectorPage:null,settings:null,componentId:null},e.reload=function(){var t=Object(l.a)(o.a.mark((function t(n,a){var i,r,s,c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W("/ui/settings");case 2:if(i=t.sent,r=i.data,!(s=JSON.parse(r)).data.smartthings.appId||!s.data.smartthings.appSecret){t.next=8;break}return t.next=8,W("/ui/settings/syncDevices");case 8:return t.next=10,W("/ui/settings");case 10:c=t.sent,s=JSON.parse(c.data),l={settings:s},n&&(l.selectorPage=n),a&&(l.componentId=a),e.setState(l);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e.onSmartThingsSettingClick=function(){e.setState({selectorPage:Y})},e.onSmartThingsAddDeviceClick=function(){e.setState({selectorPage:$})},e.onAddUsersClick=function(){e.setState({selectorPage:te})},e.onSmartThingsViewDeviceClick=function(t){e.setState({selectorPage:ee,componentId:t})},e.onViewUserClick=function(t){e.setState({selectorPage:ne,componentId:t})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.collapsed,a=t.selectorPage,i=t.componentId,r=t.settings;return Object(q.jsxs)(m.a,{style:{minHeight:"100vh"},children:[Object(q.jsxs)(g.a,{collapsible:!0,collapsed:n,onCollapse:this.onCollapse,children:[Object(q.jsx)("div",{className:"logo"}),Object(q.jsxs)(f.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(q.jsx)(f.a.Item,{icon:Object(q.jsx)(O.a,{}),onClick:this.onSmartThingsSettingClick,children:H().settings},"1"),Object(q.jsxs)(S.a,{icon:Object(q.jsx)(b.a,{}),title:H().devices,disabled:!(r&&r.data.smartthings.appId&&r.data.smartthings.appSecret),children:[r&&r.data.smartthings.devices?r.data.smartthings.devices.map((function(t){return Object(q.jsx)(f.a.Item,{onClick:function(){e.onSmartThingsViewDeviceClick(t.id)},children:t.deviceLabel},t.id)})):null,Object(q.jsx)(f.a.Item,{onClick:this.onSmartThingsAddDeviceClick,children:H().addDevice},"addDevice")]},"devices"),r&&"local"===r.data.connectionType?Object(q.jsxs)(S.a,{icon:Object(q.jsx)(x.a,{}),title:H().users,children:[r&&r.data.users?r.data.users.map((function(t){return Object(q.jsx)(f.a.Item,{onClick:function(){e.onViewUserClick(t.id)},children:t.username},t.id)})):null,Object(q.jsx)(f.a.Item,{onClick:function(){e.onAddUsersClick()},children:H().addUser},"addUser")]},"sub1"):null]})]}),Object(q.jsxs)(m.a,{className:"site-layout",children:[Object(q.jsx)(j.Header,{className:"site-layout-background",style:{padding:0}}),Object(q.jsx)(le,{name:a||Y,id:i,reload:this.reload}),Object(q.jsx)(j.Footer,{style:{textAlign:"center"},children:" \xa92021 Created by Vasyl Zakharchenko"})]})]})}}]),n}(a.Component);var de=function(){return Object(q.jsx)("div",{children:Object(q.jsx)(ue,{})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,380)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(de,{})}),document.getElementById("root")),he()}},[[369,1,2]]]);
//# sourceMappingURL=main.a7bb2674.chunk.js.map